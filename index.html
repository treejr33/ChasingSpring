<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Spring Chasers - Bird Migration Visualization" />
    <title>候鸟逐春：数据分析与生存挑战</title>
    
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&family=Noto+Serif+SC:wght@300;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="style.css" rel="stylesheet" />
</head>
<body id="page-top">
    
    <button class="lang-switch-btn" onclick="toggleLanguage()">
        <i class="fas fa-globe"></i> <span id="lang-btn-text">EN</span>
    </button>

    <div class="video-background-holder">
        <div class="video-overlay"></div>
        <video autoplay muted loop playsinline id="bg-video">
            <source src="assets/bg-video.mp4" type="video/mp4">
        </video>
    </div>

    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
        <div class="container px-4 px-lg-5 p-0">
            <a class="navbar-brand text-white" href="#page-top">
                <span class="lang-zh">候鸟逐春</span><span class="lang-en">SPRING CHASERS</span>
            </a>
            <button class="navbar-toggler navbar-toggler-right bg-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link text-white-50 fw-bold" href="#about">
                        <span class="lang-zh">迁徙奥秘</span><span class="lang-en">The Journey</span>
                    </a></li>
                    <li class="nav-item"><a class="nav-link text-white-50 fw-bold" href="#map-section">
                        <span class="lang-zh">迁徙地图</span><span class="lang-en">Map</span>
                    </a></li>
                    <li class="nav-item"><a class="nav-link text-white-50 fw-bold" href="#story-analysis">
                        <span class="lang-zh">简要分析</span><span class="lang-en">Analysis</span>
                    </a></li>
                    <li class="nav-item"><a class="nav-link text-white-50 fw-bold" href="#contact">
                        <span class="lang-zh">加入我们</span><span class="lang-en">Join</span>
                    </a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <header class="masthead">
        <div class="hero-box">
            <h1 class="hero-title">
                <span class="lang-zh">候鸟逐春</span>
                <span class="lang-en">SPRING CHASERS</span>
            </h1>
            <div class="hero-subtitle">
                <span class="lang-zh">中国候鸟迁徙与气温变化可视化</span>
                <span class="lang-en">Tracking the Warmth: A Migration Visualization</span>
            </div>
            <div>
                <a class="btn btn-hero" href="#map-section">
                    <span class="lang-zh">开启旅程</span><span class="lang-en">Explore Map</span>
                </a>
            </div>
        </div>
        <div class="tm-next" style="position:absolute; bottom:40px;">
            <a href="#about"><i class="fas fa-caret-down tm-down-arrow"></i></a>
        </div> 
    </header>

    <section class="about-section text-center" id="about" style="position:relative;">
        <div class="methodology-float" onclick="this.classList.toggle('active')">
            <div class="method-icon"><i class="fas fa-microscope"></i></div>
            <div class="method-content">
                <strong class="brand-font" style="font-size:1.1rem; display:block; margin-bottom:10px;">
                    <span class="lang-zh">研究方法</span><span class="lang-en">Methodology</span>
                </strong>
                <span class="lang-zh">
                    本项目基于 2024 年卫星追踪数据 (GPS/GSM) 重构迁徙路径。气温数据来源于 NASA MERRA-2 再分析资料。我们采用了空间插值法将离散的鸟类坐标与连续的等温线进行时空匹配，以验证“5-10°C 迁徙窗口”假说。
                </span>
                <span class="lang-en">
                    Migration paths are reconstructed using 2024 GPS/GSM tracking data. Temperature data is derived from NASA MERRA-2. We used spatial interpolation to align discrete bird coordinates with continuous isotherms to validate the "5-10°C migration window" hypothesis.
                </span>
            </div>
        </div>

        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-lg-8">
                    <h2 class="text-white mb-4 brand-font">
                        <span class="lang-zh">逐温而行：生命的节律</span>
                        <span class="lang-en">Chasing Isotherms: The Rhythm of Life</span>
                    </h2>
                    <p class="text-white-50 fs-5">
                        <span class="lang-zh">候鸟的迁徙是一场对能量与时机的精准计算。为了生存，它们不仅要追随 <strong>5°C - 10°C</strong> 的舒适温区，还要避开拥挤的旧路线，寻找新的食物补给点。</span>
                        <span class="lang-en">Migration is a delicate balance of energy and timing. Driven by survival, these travelers don't just fly north—they follow the <strong>5°C - 10°C</strong> isotherm.</span>
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <section class="projects-section" id="map-section">
        <div class="section-bg-layer">
            <div id="bg-img-east" class="bg-bird-img active" style="background-image: url('assets/img/crane.png');"></div>
            <div id="bg-img-mid" class="bg-bird-img active" style="background-image: url('assets/img/swan.png');"></div>
            <div id="bg-img-west" class="bg-bird-img active" style="background-image: url('assets/img/goose.png');"></div>
        </div>

        <div class="container px-4 px-lg-5" style="position: relative; z-index: 5;">
            <div class="text-center mb-5">
                <h2 class="text-black brand-font">
                    <span class="lang-zh">候鸟迁徙全周期模拟</span>
                    <span class="lang-en">Annual Cycle Simulation</span>
                </h2>
                <p class="text-muted">
                    <span class="lang-zh">左侧查看<strong>数据分析</strong>，右侧开启<strong>生存挑战</strong>。点击右上角开启<strong>热力图</strong>。</span>
                    <span class="lang-en">Use <strong>Analytics</strong> on left, <strong>Survival Mode</strong> on right. Toggle <strong>Heatmap</strong> at top-right.</span>
                </p>
            </div>

            <div class="row gx-0 mb-5">
                <div class="col-xl-9 col-lg-9 p-0 position-relative">
                    <div id="map"></div>

                    <div class="sidebar-wrapper">
                        <div class="sidebar-trigger-btn" title="Information"><i class="fas fa-info"></i></div>
                        <div class="sidebar-panel">
                            <div class="sidebar-content-inner" id="sidebar-content"></div>
                        </div>
                    </div>

                    <div id="chart-trigger" class="chart-trigger-btn" onclick="toggleChartDashboard()" title="Analytics">
                        <i class="fas fa-chart-pie"></i>
                    </div>

                    <div id="chart-dashboard" class="chart-overlay-panel">
                        <div class="chart-tabs">
                            <div class="chart-tab-item active" onclick="switchChartTab('distance', this)">
                                <i class="fas fa-route"></i> <span class="lang-zh">里程竞赛</span><span class="lang-en">Distance</span>
                            </div>
                            <div class="chart-tab-item" onclick="switchChartTab('elevation', this)">
                                <i class="fas fa-mountain"></i> <span class="lang-zh">垂直挑战</span><span class="lang-en">Elevation</span>
                            </div>
                            <div class="chart-tab-item" onclick="switchChartTab('latitude', this)">
                                <i class="fas fa-temperature-high"></i> <span class="lang-zh">逐温而行</span><span class="lang-en">Isotherms</span>
                            </div>
                            <div style="margin-left: auto; cursor: pointer; opacity: 0.5;" onclick="toggleChartDashboard()">
                                <i class="fas fa-times"></i>
                            </div>
                        </div>
                        <div id="chart-distance" class="chart-container active"></div>
                        <div id="chart-elevation" class="chart-container"></div>
                        <div id="chart-latitude" class="chart-container"></div>
                    </div>

                    <button id="play-btn" class="play-control-btn" onclick="togglePlay()"><i class="fas fa-play"></i></button>

                    <div class="temp-legend">
                        <div class="temp-gradient-bar"></div>
                        <div class="temp-labels">
                            <span>35°C</span><span>5°C</span><span>-25°C</span>
                        </div>
                    </div>
                </div>
                
                <div class="col-xl-3 col-lg-3 right-sidebar-col">
                    
                    <div class="mode-switch-wrapper">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="survivalModeToggle" onchange="toggleSurvivalMode()">
                            <label class="form-check-label fw-bold" for="survivalModeToggle">
                                <span class="lang-zh">生存挑战</span>
                                <span class="lang-en">Survival Mode</span>
                            </label>
                        </div>
                    </div>


                    <div id="energy-dashboard" class="energy-panel">
                        <div class="energy-header">
                            <span class="lang-zh">脂肪能量监测</span><span class="lang-en">Fat/Energy Monitor</span>
                            <i class="fas fa-heart-pulse" style="color:#ff4e50;"></i>
                        </div>
                        <div class="energy-item" id="energy-row-east">
                            <div class="energy-label"><span class="lang-zh">丹顶鹤</span><span class="lang-en">Crane</span></div>
                            <div class="progress-container"><div class="progress-bar-fill" style="width: 100%;"></div></div>
                            <div class="energy-value">100%</div>
                        </div>
                        <div class="energy-item" id="energy-row-mid">
                            <div class="energy-label"><span class="lang-zh">小天鹅</span><span class="lang-en">Swan</span></div>
                            <div class="progress-container"><div class="progress-bar-fill" style="width: 100%;"></div></div>
                            <div class="energy-value">100%</div>
                        </div>
                        <div class="energy-item" id="energy-row-west">
                            <div class="energy-label"><span class="lang-zh">斑头雁</span><span class="lang-en">Goose</span></div>
                            <div class="progress-container"><div class="progress-bar-fill" style="width: 100%;"></div></div>
                            <div class="energy-value">100%</div>
                        </div>
                        <div style="font-size:0.75rem; color:#aaa; margin-top:20px; line-height:1.4; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
                            <span class="lang-zh">
                                <i class="fas fa-exclamation-circle"></i> <strong>玩法说明：</strong><br>
                                地图上出现 <i class="fas fa-tint" style="color:#20c997"></i> 代表关键补给点。<br>
                                点击图标选择 <strong>[开发破坏]</strong>，该点枯竭。候鸟飞抵此处若无法补给，能量归零即死亡。
                            </span>
                            <span class="lang-en">
                                <i class="fas fa-exclamation-circle"></i> <strong>How to Play:</strong><br>
                                <i class="fas fa-tint" style="color:#20c997"></i> marks key stopovers.<br>
                                Click to <strong>[Destroy]</strong>. Birds reaching a destroyed site cannot refuel and may die.
                            </span>
                        </div>
                    </div>

                </div>
                
                <div class="col-12">
                    <div class="slider-container-bottom">
                        <span id="current-month-label" style="font-size: 1.5rem; font-weight: 800; color: #2c3e50; width: 100px; text-align: center;">1月</span>
                        <input type="range" id="month-slider" min="1" max="12" value="1" step="1" style="flex-grow: 1;">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="story-section" id="story-analysis">
        <div class="container px-4 px-lg-5">
            <div class="text-center mb-5">
                <h2 class="text-white brand-font">
                    <span class="lang-zh">迁徙之道：自然的算法</span>
                    <span class="lang-en">The Way of Migration: Nature's Algorithms</span>
                </h2>
                <p class="text-white-50">
                    <span class="lang-zh">为了生存与繁衍，三种候鸟演化出了截然不同的最优解策略。</span>
                    <span class="lang-en">For survival and reproduction, three species evolved distinct optimal strategies.</span>
                </p>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="story-card" style="border-top-color: #FF7F50;">
                        <h4 style="color:#FF7F50">
                            <span class="lang-zh">东线：适应性共存</span>
                            <span class="lang-en">Adaptive Coexistence</span>
                        </h4>
                        <p>
                            <span class="lang-zh">丹顶鹤面临的是最复杂的计算环境。在高度城市化的东部沿海，它们的生存算法是“精准定位破碎生境”。它们放弃广阔栖息地，转而在盐城和黄河口等关键湿地节点中，寻找与人类活动共存的最优路径。</span>
                            <span class="lang-en">Red-crowned Cranes face the most complex environment. In the highly urbanized east, their survival algorithm is "precision targeting of fragmented habitats." They find optimal paths for coexistence within critical wetland nodes like Yancheng.</span>
                        </p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="story-card" style="border-top-color: #20c997;">
                        <h4 style="color:#20c997">
                            <span class="lang-zh">中线：能量效率最优解</span>
                            <span class="lang-en">Energy Efficiency Optimization</span>
                        </h4>
                        <p>
                            <span class="lang-zh">小天鹅执行的是一场超长距离的能量管理程序。面对干旱内陆，它们的策略是“分段续航”。利用沿途季节性湖泊作为必要的能量补给站，精确计算飞行距离与体能储备，完成跨越荒野的远征。</span>
                            <span class="lang-en">Tundra Swans execute a long-range energy management program. Facing arid inland areas, their strategy is "staged refueling." Utilizing seasonal lakes as essential depots, they balance flight distance and energy reserves to cross the wilderness.</span>
                        </p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="story-card" style="border-top-color: #56ccf2;">
                        <h4 style="color:#56ccf2">
                            <span class="lang-zh">西线：生理机能最大化</span>
                            <span class="lang-en">Physiological Maximization</span>
                        </h4>
                        <p>
                            <span class="lang-zh">斑头雁掌握着破解物理极限的高阶算法。为了翻越喜马拉雅，它们进化出了极强的心肺功能。这并非蛮力对抗，而是等待最佳季风气流，利用环境助力在极短时间内完成垂直升限挑战的完美结合。</span>
                            <span class="lang-en">Bar-headed Geese possess a high-level algorithm for extreme physics. To cross the Himalayas, they evolved specialized cardio functions. Their strategy is waiting for optimal monsoon winds, leveraging the environment for a rapid vertical ascent.</span>
                        </p>
                    </div>
                </div>
            </div>

            <div class="story-summary">
                <h3>
                    <span class="lang-zh">共同的节律：等温线的召唤</span>
                    <span class="lang-en">Common Rhythm: The Call of Isotherms</span>
                </h3>
                <p>
                    <span class="lang-zh">
                        尽管三条路线的地理挑战迥异，但它们都严格遵循着同一个“物候时钟”。地图上的热力流动揭示了这一核心算法：从南亚的热浪到西伯利亚的寒风，候鸟的每一次振翅，本质上都是对地球 5°C - 10°C 舒适温区北移与南撤的精准响应。这是一场生命与季节同频的宏大共振。
                    </span>
                    <span class="lang-en">
                        Despite distinct geographic challenges, they all obey a single "phenological clock." The thermal flow on the map reveals this core algorithm: from South Asian heat to Siberian chill, every wingbeat is a precise response to the shifting 5°C - 10°C thermal comfort zone. It is a grand resonance of life synchronized with the seasons.
                    </span>
                </p>
            </div>

        </div>
    </section>
    
    <section class="signup-section" id="contact">
        <div class="container px-4 px-lg-5 text-center">
            <i class="far fa-paper-plane fa-2x mb-4 text-white"></i>
            <h2 class="text-white mb-4 brand-font">
                <span class="lang-zh">关注候鸟保护计划</span>
                <span class="lang-en">Protect the Migratory Birds</span>
            </h2>
            <form class="col-md-6 mx-auto d-flex">
                <input class="form-control me-2" type="email" placeholder="Email..." />
                <button class="btn btn-primary" type="button">
                    <span class="lang-zh">订阅</span><span class="lang-en">Subscribe</span>
                </button>
            </form>
        </div>
    </section>

    <footer class="footer bg-black small text-center text-white-50 py-4">
        <div class="container">Copyright &copy; Spring Chasers 2025 | Tiles &copy; CARTO & OSM</div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
    <script src="script.js"></script>
</body>
</html>